<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Retrieve Taxonomic Data From Dyntaxa • SHARK4R</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve Taxonomic Data From Dyntaxa">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SHARK4R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/retrieve_shark_data.html">Retrieve SHARK Data</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_dyntaxa_data.html">Retrieve Dyntaxa Data</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_worms_data.html">Retrieve WoRMS Data</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_algaebase_data.html">Retrieve AlgaeBase Data</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_hab_data.html">Retrieve HAB Data</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_nordic_microalgae_data.html">Retrieve Nordic Microalgae Data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/quality_control.html">Quality Control</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sharksmhi/SHARK4R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve Taxonomic Data From Dyntaxa</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sharksmhi/SHARK4R/blob/master/vignettes/retrieve_dyntaxa_data.Rmd" class="external-link"><code>vignettes/retrieve_dyntaxa_data.Rmd</code></a></small>
      <div class="d-none name"><code>retrieve_dyntaxa_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="dyntaxa">Dyntaxa<a class="anchor" aria-label="anchor" href="#dyntaxa"></a>
</h2>
<p>Dyntaxa is a taxonomic database of Swedish organisms hosted at <a href="https://www.slu.se/artdatabanken/" class="external-link">SLU Artdatabanken</a>,
providing information on their names and relationships. The database
includes details such as the current classification, recommended names,
and commonly used synonymous or misapplied names. Dyntaxa is
continuously updated with new species for Sweden, new Swedish names,
synonymous scientific names, and new data on relationships. The data in
Dyntaxa serves as the foundation and framework for taxonomic information
in <a href="https://shark.smhi.se/" class="external-link">SHARK</a>. It can be accessed via a
<a href="https://artfakta.se/" class="external-link">web interface</a> or through the <a href="https://api-portal.artdatabanken.se/" class="external-link">API</a>, as demonstrated in
this tutorial using <code>SHARK4R</code>. Please note that the authors
of <code>SHARK4R</code> are not affiliated with Dyntaxa.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install the package from GitHub using the
<code>devtools</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"sharksmhi/SHARK4R"</span>,</span>
<span>                         dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Load the <code>SHARK4R</code>, <code>tibble</code> and
<code>dplyr</code> libraries:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sharksmhi.github.io/SHARK4R/">SHARK4R</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retrieve-taxonony-table-from-shark">Retrieve Taxonony Table from SHARK<a class="anchor" aria-label="anchor" href="#retrieve-taxonony-table-from-shark"></a>
</h3>
<p>Taxon and data tables can be retrieved with the same filtering
options available in <a href="https://shark.smhi.se/" class="external-link">SHARK</a>. To see
the available filtering options, please refer to <a href="../reference/get_shark_options.html"><code>get_shark_options</code></a>
and the <a href="../articles/retrieve_shark_data.html">Retrieve Data
From SHARK</a> tutorial.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve taxonomy reports for phytoplankton between 2019 and 2020</span></span>
<span><span class="va">shark_taxon</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_shark_data.html">get_shark_data</a></span><span class="op">(</span>tableView <span class="op">=</span> <span class="st">"report_taxon"</span>,</span>
<span>                              fromYear <span class="op">=</span> <span class="fl">2019</span>,</span>
<span>                              toYear <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>                              dataTypes <span class="op">=</span> <span class="st">"Phytoplankton"</span>,</span>
<span>                              verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">shark_taxon</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 701 × 6</span></span></span>
<span><span class="co">##    reported_scientific_name  scientific_name dyntaxa_id aphia_id taxon_hierarchy</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Acanthoceras zachariasii  Acanthoceras z…     <span style="text-decoration: underline;">264</span>148   <span style="text-decoration: underline;">178</span>990 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Acanthoica quattrospina   Acanthoica qua…     <span style="text-decoration: underline;">236</span>952   <span style="text-decoration: underline;">235</span>802 Chromista - Ha…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Acanthostomella           Acanthostomella    1<span style="text-decoration: underline;">010</span>638       <span style="color: #BB0000;">NA</span> Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Acanthostomella norvegica Acanthostomell…     <span style="text-decoration: underline;">238</span>502   <span style="text-decoration: underline;">183</span>556 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Achnanthes                Achnanthes         1<span style="text-decoration: underline;">010</span>466   <span style="text-decoration: underline;">149</span>191 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Actinastrum hantzschii    Actinastrum ha…     <span style="text-decoration: underline;">238</span>839   <span style="text-decoration: underline;">160</span>543 Plantae - Viri…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Actinocyclus              Actinocyclus       1<span style="text-decoration: underline;">010</span>407   <span style="text-decoration: underline;">148</span>944 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Actinocyclus normanii     Actinocyclus n…     <span style="text-decoration: underline;">237</span>433   <span style="text-decoration: underline;">148</span>945 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Actinocyclus octonarius   Actinocyclus o…     <span style="text-decoration: underline;">237</span>434   <span style="text-decoration: underline;">149</span>164 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Actinocyclus octonarius … Actinocyclus o…     <span style="text-decoration: underline;">248</span>668   <span style="text-decoration: underline;">162</span>770 Chromista - Sa…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 691 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: counted_rows &lt;dbl&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve all phytoplankton data from July 2015</span></span>
<span><span class="va">shark_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_shark_data.html">get_shark_data</a></span><span class="op">(</span>tableView <span class="op">=</span> <span class="st">"sharkdata_phytoplankton"</span>,</span>
<span>                             fromYear <span class="op">=</span> <span class="fl">2015</span>, </span>
<span>                             toYear <span class="op">=</span> <span class="fl">2015</span>,</span>
<span>                             months <span class="op">=</span> <span class="fl">7</span>,</span>
<span>                             dataTypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Phytoplankton"</span><span class="op">)</span>,</span>
<span>                             verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">shark_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 12,519 × 138</span></span></span>
<span><span class="co">##    delivery_datatype check_status_sv data_checked_by_sv visit_year visit_month</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Phytoplankton     Klar            Leverantör               <span style="text-decoration: underline;">2</span>015           7</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 12,509 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 133 more variables: station_name &lt;chr&gt;, reported_station_name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   sample_location_id &lt;dbl&gt;, station_id &lt;dbl&gt;, sample_project_name_sv &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   sample_orderer_name_sv &lt;chr&gt;, platform_code &lt;chr&gt;, expedition_id &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   shark_sample_id_md5 &lt;chr&gt;, sample_date &lt;date&gt;, sample_time &lt;time&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   sample_latitude_dm &lt;chr&gt;, sample_longitude_dm &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   sample_latitude_dd &lt;dbl&gt;, sample_longitude_dd &lt;dbl&gt;, …</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="dyntaxa-api-key">Dyntaxa API Key<a class="anchor" aria-label="anchor" href="#dyntaxa-api-key"></a>
</h3>
<p>Dyntaxa requires a subscription key to access its API. To obtain your
own key, sign up for the taxonomy product at the <a href="https://api-portal.artdatabanken.se/" class="external-link">SLU Swedish Species
Information Centre´s Developer Portal</a>. In the example below, the key
is retrieved from an environment variable.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve the API key</span></span>
<span><span class="va">dyntaxa_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DYNTAXA_KEY"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="update-shark-taxonomy-data">Update SHARK Taxonomy Data<a class="anchor" aria-label="anchor" href="#update-shark-taxonomy-data"></a>
</h2>
<p>If the taxonomic data downloaded from SHARK are outdated, they can be
updated to the latest Dyntaxa information using <code>SHARK4R</code>.
Alternatively, data can be retrieved from WoRMS. For details, see the <a href="../articles/retrieve_worms_data.html">WoRMS Tutorial</a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Update taxonomy information for the retrieved phytoplankton data</span></span>
<span><span class="va">updated_taxonomy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_dyntaxa_taxonomy.html">update_dyntaxa_taxonomy</a></span><span class="op">(</span></span>
<span>  dyntaxa_ids <span class="op">=</span> <span class="va">shark_data</span><span class="op">$</span><span class="va">dyntaxa_id</span>,</span>
<span>  subscription_key <span class="op">=</span> <span class="va">dyntaxa_key</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the updated taxonomy data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">updated_taxonomy</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 12,519 × 10</span></span></span>
<span><span class="co">##    dyntaxa_id scientific_name taxon_kingdom taxon_phylum taxon_class taxon_order</span></span>
<span><span class="co">##         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     <span style="text-decoration: underline;">237</span>393 Aulacoseira am… Chromista     Gyrista      Coscinodis… Aulacoseir…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     <span style="text-decoration: underline;">237</span>398 Aulacoseira it… Chromista     Gyrista      Coscinodis… Aulacoseir…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     <span style="text-decoration: underline;">237</span>398 Aulacoseira it… Chromista     Gyrista      Coscinodis… Aulacoseir…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     <span style="text-decoration: underline;">238</span>026 Diatoma tenuis  Chromista     Gyrista      Bacillario… Rhabdonema…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     <span style="text-decoration: underline;">237</span>039 Dinobryon bava… Chromista     Gyrista      Chrysophyc… Ochromonad…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>     <span style="text-decoration: underline;">237</span>978 Tabellaria flo… Chromista     Gyrista      Bacillario… Rhabdonema…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>     <span style="text-decoration: underline;">237</span>978 Tabellaria flo… Chromista     Gyrista      Bacillario… Rhabdonema…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     <span style="text-decoration: underline;">237</span>978 Tabellaria flo… Chromista     Gyrista      Bacillario… Rhabdonema…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>    1<span style="text-decoration: underline;">010</span>525 Cryptomonas     Chromista     Cryptophyta  Cryptophyc… Cryptomona…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>    1<span style="text-decoration: underline;">010</span>525 Cryptomonas     Chromista     Cryptophyta  Cryptophyc… Cryptomona…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 12,509 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 4 more variables: taxon_family &lt;chr&gt;, taxon_genus &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   taxon_species &lt;chr&gt;, taxon_hierarchy &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="match-taxon-names">Match Taxon Names<a class="anchor" aria-label="anchor" href="#match-taxon-names"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Randomly select 10 phytoplankton taxa from shark_taxon</span></span>
<span><span class="va">taxon_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">shark_taxon</span><span class="op">$</span><span class="va">scientific_name</span>, size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Match taxon_names with Dyntaxa API</span></span>
<span><span class="va">matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/match_taxon_name.html">match_taxon_name</a></span><span class="op">(</span>taxon_names <span class="op">=</span> <span class="va">taxon_names</span>, </span>
<span>                            subscription_key <span class="op">=</span> <span class="va">dyntaxa_key</span>, </span>
<span>                            multiple_options <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                            verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the result</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">matches</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 5</span></span></span>
<span><span class="co">##    search_pattern                         taxon_id best_match  author valid_name</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Cosmarium                               1<span style="text-decoration: underline;">010</span>708 Cosmarium   Corda… Cosmarium </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Monoraphidium dybowskii                  <span style="text-decoration: underline;">238</span>756 Monoraphid… (Wolo… Monoraphi…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Pavlova                                 1<span style="text-decoration: underline;">010</span>307 Pavlova     Butch… Pavlova   </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Aulacoseira islandica subsp. helvetica   <span style="text-decoration: underline;">248</span>665 Aulacoseir… (O.F.… Aulacosei…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Planktosphaeria gelatinosa               <span style="text-decoration: underline;">238</span>776 Planktosph… G.M.S… Planktosp…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Pyramimonas virginica                    <span style="text-decoration: underline;">238</span>976 Pyramimona… Penni… Pyramimon…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Oxytoxum gracile                         <span style="text-decoration: underline;">238</span>173 Oxytoxum g… J.Sch… Oxytoxum …</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Desmodesmus armatus                      <span style="text-decoration: underline;">238</span>842 Desmodesmu… (Chod… Desmodesm…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Dactyliosolen fragilissimus              <span style="text-decoration: underline;">237</span>461 Dactylioso… (Berg… Dactylios…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Protoperidinium curtipes                 <span style="text-decoration: underline;">238</span>251 Protoperid… (E. J… Protoperi…</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="retrieve-taxonomic-information">Retrieve Taxonomic information<a class="anchor" aria-label="anchor" href="#retrieve-taxonomic-information"></a>
</h2>
<p>Taxonomic records can be retrieved for indivudual taxa using the <a href="../reference/get_dyntaxa_records.html"><code>get_dyntaxa_records</code></a>
function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get all Dyntaxa IDs</span></span>
<span><span class="va">dyntaxa_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">matches</span><span class="op">$</span><span class="va">taxon_id</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove potential NAs</span></span>
<span><span class="va">dyntaxa_id</span> <span class="op">&lt;-</span> <span class="va">dyntaxa_id</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dyntaxa_id</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Get Dyntaxa records</span></span>
<span><span class="va">dyntaxa_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dyntaxa_records.html">get_dyntaxa_records</a></span><span class="op">(</span>taxon_ids <span class="op">=</span> <span class="va">dyntaxa_id</span>,</span>
<span>                                       subscription_key <span class="op">=</span> <span class="va">dyntaxa_key</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print records</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">dyntaxa_records</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 24</span></span></span>
<span><span class="co">##    taxonId parentId secondaryParents sortOrder isMicrospecies externalComment   </span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">237</span>461  1<span style="text-decoration: underline;">010</span>415 <span style="color: #949494;">&lt;list [0]&gt;</span>           <span style="text-decoration: underline;">72</span>962 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">238</span>173  1<span style="text-decoration: underline;">010</span>573 <span style="color: #949494;">&lt;list [0]&gt;</span>           <span style="text-decoration: underline;">69</span>219 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">238</span>251  1<span style="text-decoration: underline;">010</span>596 <span style="color: #949494;">&lt;list [0]&gt;</span>           <span style="text-decoration: underline;">69</span>311 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">238</span>756  1<span style="text-decoration: underline;">016</span>310 <span style="color: #949494;">&lt;list [0]&gt;</span>          <span style="text-decoration: underline;">111</span>278 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">238</span>776  1<span style="text-decoration: underline;">010</span>736 <span style="color: #949494;">&lt;list [0]&gt;</span>          <span style="text-decoration: underline;">111</span>238 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">238</span>842  1<span style="text-decoration: underline;">010</span>759 <span style="color: #949494;">&lt;list [0]&gt;</span>          <span style="text-decoration: underline;">111</span>099 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">238</span>976  1<span style="text-decoration: underline;">010</span>807 <span style="color: #949494;">&lt;list [0]&gt;</span>          <span style="text-decoration: underline;">111</span>444 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">248</span>665   <span style="text-decoration: underline;">237</span>397 <span style="color: #949494;">&lt;list [0]&gt;</span>           <span style="text-decoration: underline;">72</span>831 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> 1<span style="text-decoration: underline;">010</span>307  2<span style="text-decoration: underline;">003</span>125 <span style="color: #949494;">&lt;list [0]&gt;</span>           <span style="text-decoration: underline;">68</span>529 FALSE          <span style="color: #BB0000;">NA</span>                </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> 1<span style="text-decoration: underline;">010</span>708  2<span style="text-decoration: underline;">003</span>281 <span style="color: #949494;">&lt;list [0]&gt;</span>           <span style="text-decoration: underline;">95</span>703 FALSE          Original publicat…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 18 more variables: redlistCategory &lt;lgl&gt;, excludeFromReportingSystem &lt;lgl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   nrOfChilds &lt;int&gt;, names &lt;list&gt;, typedRelations.parentRelations &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   typedRelations.childRelations &lt;list&gt;, status.id &lt;int&gt;, status.value &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   status.name &lt;chr&gt;, statusReason.id &lt;int&gt;, statusReason.value &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   statusReason.name &lt;chr&gt;, category.id &lt;int&gt;, category.value &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   category.name &lt;chr&gt;, type.id &lt;int&gt;, type.value &lt;chr&gt;, type.name &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="retrieve-parent-ids">Retrieve Parent IDs<a class="anchor" aria-label="anchor" href="#retrieve-parent-ids"></a>
</h2>
<p>All parent taxa above the Dyntaxa ID can be retrieved using the <a href="../reference/get_dyntaxa_parent_ids.html"><code>get_dyntaxa_parent_ids</code></a>
function.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get all parents</span></span>
<span><span class="va">parents_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_dyntaxa_parent_ids.html">get_dyntaxa_parent_ids</a></span><span class="op">(</span>taxon_ids <span class="op">=</span> <span class="va">dyntaxa_id</span>, </span>
<span>                                     subscription_key <span class="op">=</span> <span class="va">dyntaxa_key</span>,</span>
<span>                                     verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List the IDs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">parents_id</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] 5000045 6000581 6000543 6000542 4000126 6008733 2003281 1010708</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[2]]</span></span>
<span><span class="co">## [1] 5000045 6000581 6000582 5000046 4000128 3000412 6001105 1016310  238756</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[3]]</span></span>
<span><span class="co">## [1] 5000055 6011754 5000056 4000154 3000560 2003125 1010307</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[4]]</span></span>
<span><span class="co">##  [1] 5000055 6011755 6011756 6011758 6322929 5000104 6323134 6323136 4000164</span></span>
<span><span class="co">## [10] 3000587 2003165 1010397  237397  248665</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[5]]</span></span>
<span><span class="co">## [1] 5000045 6000581 6000582 5000046 4000128 3000412 6007670 1010736  238776</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[6]]</span></span>
<span><span class="co">## [1] 5000045 6000581 6000582 5000046 4000181 3000643 2003305 1010807  238976</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[7]]</span></span>
<span><span class="co">##  [1] 5000055 6011755 6011756 6011759 6011678 5000062 6011725 6011726 4000169</span></span>
<span><span class="co">## [10] 3000850 2003944 1010573  238173</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[8]]</span></span>
<span><span class="co">## [1] 5000045 6000581 6000582 5000046 4000128 3000412 2003290 1010759  238842</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[9]]</span></span>
<span><span class="co">##  [1] 5000055 6011755 6011756 6011758 6322929 5000104 6323134 6323136 4000164</span></span>
<span><span class="co">## [10] 3000591 2003174 1010415  237461</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## [[10]]</span></span>
<span><span class="co">##  [1] 5000055 6011755 6011756 6011759 6011678 5000062 6011725 6011726 4000169</span></span>
<span><span class="co">## [10] 3000850 2003235 1010596  238251</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="construct-complete-taxonomic-table">Construct Complete Taxonomic Table<a class="anchor" aria-label="anchor" href="#construct-complete-taxonomic-table"></a>
</h2>
<p>A comprehensive taxonomic table, including related taxa, can be
created with the <a href="../reference/construct_dyntaxa_table.html"><code>construct_dyntaxa_table</code></a>
function. Use the <code>add_synonyms</code> parameter to include
synonyms, and the <code>add_parents</code> and
<code>add_descendants</code> parameters to include parent and descendant
taxa, respectively. If Taxon IDs are missing from the <a href="../reference/get_dyntaxa_dwca.html">DwC-A export</a> (e.g. species
complex and pseudotaxon), they can be matched using the
<code>add_missing_taxa</code> argument. Additionally, complete hierarchy
information can be added as a string of parent taxa separated by “-”
using the <code>add_hierarchy</code> argument.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve complete taxonomic table (including parents and descendants)</span></span>
<span><span class="va">taxonomy_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/construct_dyntaxa_table.html">construct_dyntaxa_table</a></span><span class="op">(</span>taxon_ids <span class="op">=</span> <span class="va">dyntaxa_id</span>, </span>
<span>                                          subscription_key <span class="op">=</span> <span class="va">dyntaxa_key</span>, </span>
<span>                                          shark_output <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                                          add_parents <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                          add_synonyms <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                          add_descendants <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                          add_descendants_rank <span class="op">=</span> <span class="st">"genus"</span>,</span>
<span>                                          add_missing_taxa <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                          add_hierarchy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                          verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print the taxonomy table as a tibble</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">taxonomy_table</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 677 × 16</span></span></span>
<span><span class="co">##    taxonId        acceptedNameUsageID parentNameUsageID scientificName taxonRank</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Cosmarium      genus    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Pavlova        genus    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Pyramimonas v… species  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Oxytoxum grac… species  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Desmodesmus a… species  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Aulacoseira i… subspeci…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Protoperidini… species  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Dactyliosolen… species  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Planktosphaer… species  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> urn:lsid:dynt… urn:lsid:dyntaxa.s… urn:lsid:dyntaxa… Monoraphidium… species  </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 667 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 11 more variables: scientificNameAuthorship &lt;chr&gt;, taxonomicStatus &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   nomenclaturalStatus &lt;chr&gt;, taxonRemarks &lt;chr&gt;, kingdom &lt;chr&gt;, phylum &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;, species &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<pre><code><span><span class="co">## To cite package 'SHARK4R' in publications use:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Markus Lindh, Anders Torstensson (2025). SHARK4R: Retrieving,</span></span>
<span><span class="co">##   Analyzing, and Validating Marine Data from SHARK and Nordic</span></span>
<span><span class="co">##   Microalgae. R package version 0.1.7.</span></span>
<span><span class="co">##   https://doi.org/10.5281/zenodo.14169399</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   @Manual{,</span></span>
<span><span class="co">##     title = {SHARK4R: Retrieving, Analyzing, and Validating Marine Data from SHARK and Nordic Microalgae},</span></span>
<span><span class="co">##     author = {Markus Lindh and Anders Torstensson},</span></span>
<span><span class="co">##     year = {2025},</span></span>
<span><span class="co">##     note = {R package version 0.1.7},</span></span>
<span><span class="co">##     url = {https://doi.org/10.5281/zenodo.14169399},</span></span>
<span><span class="co">##   }</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Markus Lindh, Anders Torstensson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
