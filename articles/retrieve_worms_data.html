<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Retrieve Data From WoRMS • SHARK4R</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve Data From WoRMS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SHARK4R</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/retrieve_nordic_microalgae_data.html">Retrieve Data From Nordic Microalgae</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_shark_data.html">Retrieve Data From SHARK</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_taxonomic_data.html">Retrieve Taxonomic Data From Dyntaxa</a></li>
    <li><a class="dropdown-item" href="../articles/retrieve_worms_data.html">Retrieve Data From WoRMS</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sharksmhi/SHARK4R/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve Data From WoRMS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sharksmhi/SHARK4R/blob/master/vignettes/retrieve_worms_data.Rmd" class="external-link"><code>vignettes/retrieve_worms_data.Rmd</code></a></small>
      <div class="d-none name"><code>retrieve_worms_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="worms">WoRMS<a class="anchor" aria-label="anchor" href="#worms"></a>
</h2>
<p>The World Register of Marine Species (WoRMS) is a comprehensive
database providing authoritative lists of marine organism names, managed
by taxonomic experts. It combines data from the Aphia database and other
sources like AlgaeBase and FishBase, offering species names, higher
classifications, and additional data. WoRMS is continuously updated and
maintained by taxonomists. In this tutorial, we source the R package <a href="https://cran.r-project.org/web/packages/worrms/index.html" class="external-link"><code>worrms</code></a>
to access WoRMS data for our function.</p>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level4">
<h4 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h4>
<p>You can install the package from GitHub using the
<code>devtools</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"sharksmhi/SHARK4R"</span>,</span>
<span>                         dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Load the <code>SHARK4R</code> and <code>dplyr</code> libraries:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/sharksmhi/SHARK4R" class="external-link">SHARK4R</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="retrieve-data-using-shark4r">Retrieve Data Using SHARK4R<a class="anchor" aria-label="anchor" href="#retrieve-data-using-shark4r"></a>
</h2>
<div class="section level3">
<h3 id="retrieve-phytoplankton-data-from-shark">Retrieve Phytoplankton Data From SHARK<a class="anchor" aria-label="anchor" href="#retrieve-phytoplankton-data-from-shark"></a>
</h3>
<p>Phytoplankton data, including scientific names and AphiaIDs, are
downloaded from SHARK. To see more download options, please visit the <a href="https://sharksmhi.github.io/SHARK4R/articles/retrieve_shark_data.html">Retrieve
Data From SHARK</a> tutorial.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve chlorophyll data for April to June from 2019 to 2020</span></span>
<span><span class="va">shark_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_shark_data.html">get_shark_data</a></span><span class="op">(</span>fromYear <span class="op">=</span> <span class="fl">2020</span>, </span>
<span>                             toYear <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>                             months <span class="op">=</span> <span class="fl">4</span>, </span>
<span>                             dataTypes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Phytoplankton"</span><span class="op">)</span>,</span>
<span>                             verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="match-taxa-names">Match Taxa Names<a class="anchor" aria-label="anchor" href="#match-taxa-names"></a>
</h3>
<p>Taxon names can be matched with the WoRMS API to retrieve Aphia IDs
and corresponding taxonomic information. The <a href="../reference/get_worms_records_name.html"><code>get_worms_records_name</code></a>
function incorporates retry logic to handle temporary failures, ensuring
that all names are processed successfully.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Find taxa without Aphia ID</span></span>
<span><span class="va">no_aphia_id</span> <span class="op">&lt;-</span> <span class="va">shark_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">aphia_id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Randomly select taxa with missing aphia_id</span></span>
<span><span class="va">taxa_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">no_aphia_id</span><span class="op">$</span><span class="va">scientific_name</span><span class="op">)</span>, </span>
<span>                     size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>                     replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Match taxa names with WoRMS</span></span>
<span><span class="va">worms_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_worms_records_name.html">get_worms_records_name</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">taxa_names</span><span class="op">)</span>,</span>
<span>                                        fuzzy <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                        best_match_only <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                        marine_only <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                        verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result as tibble</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">worms_records</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 7 × 28</span></span></span>
<span><span class="co">##   name  AphiaID url   scientificname authority status unacceptreason taxonRankID</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Oble…  <span style="text-decoration: underline;">110</span>155 http… Oblea rotunda  (Lebour)… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Dipl…  <span style="text-decoration: underline;">109</span>515 http… Diplopsalis    R.S.Berg… accep… <span style="color: #BB0000;">NA</span>                     180</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> Stro…  <span style="text-decoration: underline;">101</span>282 http… Strombidium c… (Leegaar… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> Unic…      <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>             <span style="color: #BB0000;">NA</span>        no co… <span style="color: #BB0000;">NA</span>                      <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> Scri…  <span style="text-decoration: underline;">109</span>545 http… Scrippsiella   Balech e… accep… <span style="color: #BB0000;">NA</span>                     180</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">6</span> Leeg…  <span style="text-decoration: underline;">101</span>179 http… Leegaardiella  Lynn &amp; M… accep… <span style="color: #BB0000;">NA</span>                     180</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">7</span> Stro…  <span style="text-decoration: underline;">101</span>289 http… Strombidium c… (Lohmann… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 20 more variables: rank &lt;chr&gt;, valid_AphiaID &lt;int&gt;, valid_name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   valid_authority &lt;chr&gt;, parentNameUsageID &lt;int&gt;, kingdom &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   phylum &lt;chr&gt;, class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   citation &lt;chr&gt;, lsid &lt;chr&gt;, isMarine &lt;int&gt;, isBrackish &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   isFreshwater &lt;int&gt;, isTerrestrial &lt;int&gt;, isExtinct &lt;lgl&gt;, match_type &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   modified &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="get-worms-records-from-aphiaid">Get WoRMS records from AphiaID<a class="anchor" aria-label="anchor" href="#get-worms-records-from-aphiaid"></a>
</h3>
<p>Taxonomic records can also be retrieved using Aphia IDs, employing
the same retry and error-handling logic as the <a href="../reference/get_worms_records_name.html"><code>get_worms_records_name</code></a>
function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Randomly select ten Aphia IDs</span></span>
<span><span class="va">aphia_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">shark_data</span><span class="op">$</span><span class="va">aphia_id</span><span class="op">)</span>, </span>
<span>                    size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove NAs</span></span>
<span><span class="va">aphia_ids</span> <span class="op">&lt;-</span> <span class="va">aphia_ids</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">aphia_ids</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Retrieve records</span></span>
<span><span class="va">worms_records</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_worms_records.html">get_worms_records</a></span><span class="op">(</span><span class="va">aphia_ids</span>,</span>
<span>                                   verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result as tibble</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">worms_records</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 27</span></span></span>
<span><span class="co">##    AphiaID url        scientificname authority status unacceptreason taxonRankID</span></span>
<span><span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">146</span>222 https://w… Flagellates    <span style="color: #BB0000;">NA</span>        unacc… abandoned as …          30</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">101</span>335 https://w… Strombidium s… Claparèd… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">157</span>062 https://w… Licmophora ab… C.Agardh… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">148</span>954 https://w… Asterionella … Hassall,… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">149</span>023 https://w… Ditylum brigh… (T.West)… unass… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>  <span style="text-decoration: underline;">109</span>885 https://w… Katodinium gl… (Lebour)… unacc… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>  <span style="text-decoration: underline;">149</span>221 https://w… Chaetoceros c… Cleve, 1… accep… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>  <span style="text-decoration: underline;">106</span>282 https://w… Cryptomonas    Ehrenber… accep… <span style="color: #BB0000;">NA</span>                     180</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">146</span>562 https://w… Aphanocapsa    C.Nägeli… accep… <span style="color: #BB0000;">NA</span>                     180</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>  <span style="text-decoration: underline;">160</span>537 https://w… Melosira arct… Dickie, … unass… <span style="color: #BB0000;">NA</span>                     220</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 20 more variables: rank &lt;chr&gt;, valid_AphiaID &lt;int&gt;, valid_name &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   valid_authority &lt;chr&gt;, parentNameUsageID &lt;int&gt;, kingdom &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   phylum &lt;chr&gt;, class &lt;chr&gt;, order &lt;chr&gt;, family &lt;chr&gt;, genus &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   citation &lt;chr&gt;, lsid &lt;chr&gt;, isMarine &lt;int&gt;, isBrackish &lt;int&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   isFreshwater &lt;int&gt;, isTerrestrial &lt;int&gt;, isExtinct &lt;int&gt;, match_type &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   modified &lt;chr&gt;</span></span></span></code></pre>
</div>
<div class="section level3">
<h3 id="update-worms-taxonomy">Update WoRMS Taxonomy<a class="anchor" aria-label="anchor" href="#update-worms-taxonomy"></a>
</h3>
<p>SHARK sources taxonomic information from <a href="https://sharksmhi.github.io/SHARK4R/articles/retrieve_taxonomic_data.html">Dyntaxa</a>,
which is reflected in columns starting with <code>taxon_xxxxx</code>.
Equivalent columns based on WoRMS can be retrieved using the <a href="../reference/update_worms_taxonomy.html"><code>update_worms_taxonomy</code></a>
function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Retrieve taxonomic table</span></span>
<span><span class="va">updated_taxonomy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/update_worms_taxonomy.html">update_worms_taxonomy</a></span><span class="op">(</span><span class="va">aphia_ids</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result as tibble</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span><span class="va">updated_taxonomy</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 10 × 10</span></span></span>
<span><span class="co">##    aphia_id scientific_name   worms_kingdom worms_phylum worms_class worms_order</span></span>
<span><span class="co">##       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>   <span style="text-decoration: underline;">146</span>222 Flagellates       Protozoa      Flagellates  <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>   <span style="text-decoration: underline;">101</span>335 Strombidium sulc… Chromista     Ciliophora   Oligotrich… Oligotrich…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>   <span style="text-decoration: underline;">157</span>062 Licmophora abbre… Chromista     Heterokonto… Bacillario… Licmophora…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>   <span style="text-decoration: underline;">148</span>954 Asterionella for… Chromista     Heterokonto… Bacillario… Fragilaria…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>   <span style="text-decoration: underline;">149</span>023 Ditylum brightwe… Chromista     Heterokonto… Bacillario… Lithodesmi…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>   <span style="text-decoration: underline;">109</span>885 Katodinium glauc… Chromista     Myzozoa      Dinophyceae Tovelliales</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>   <span style="text-decoration: underline;">149</span>221 Chaetoceros curv… Chromista     Heterokonto… Bacillario… Chaetocero…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>   <span style="text-decoration: underline;">106</span>282 Cryptomonas       Chromista     Cryptophyta  Cryptophyc… Cryptomona…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>   <span style="text-decoration: underline;">146</span>562 Aphanocapsa       Bacteria      Cyanobacter… Cyanophyce… Chroococca…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>   <span style="text-decoration: underline;">160</span>537 Melosira arctica  Chromista     Heterokonto… Bacillario… Melosirales</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 4 more variables: worms_family &lt;chr&gt;, worms_genus &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   worms_species &lt;chr&gt;, worms_hierarchy &lt;chr&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Enrich data with data from WoRMS</span></span>
<span><span class="va">shark_data_with_worms</span> <span class="op">&lt;-</span> <span class="va">shark_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">updated_taxonomy</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"aphia_id"</span>, <span class="st">"scientific_name"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="assign-plankton-groups">Assign Plankton Groups<a class="anchor" aria-label="anchor" href="#assign-plankton-groups"></a>
</h3>
<p>Phytoplankton data are often categorized into major groups such as
Dinoflagellates, Diatoms, Cyanobacteria, and Others. This grouping can
be achieved by referencing information from WoRMS and assigning taxa to
these groups based on their taxonomic classification, as demonstrated in
the example below.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example names and Aphia IDs, with missing ID for Octactis speculum</span></span>
<span><span class="va">scientific_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tripos fusus"</span>, <span class="st">"Diatoma"</span>, <span class="st">"Nodularia spumigena"</span>, <span class="st">"Octactis speculum"</span><span class="op">)</span></span>
<span><span class="va">aphia_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">840626</span>, <span class="fl">149013</span>, <span class="fl">160566</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign groups by providing both scientific name and Aphia ID</span></span>
<span><span class="va">plankton_groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assign_plankton_groups.html">assign_plankton_groups</a></span><span class="op">(</span><span class="va">scientific_name</span>,</span>
<span>                                          <span class="va">aphia_id</span>,</span>
<span>                                          verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plankton_groups</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       scientific_name  plankton_group</span></span>
<span><span class="co">## 1        Tripos fusus Dinoflagellates</span></span>
<span><span class="co">## 2             Diatoma         Diatoms</span></span>
<span><span class="co">## 3 Nodularia spumigena   Cyanobacteria</span></span>
<span><span class="co">## 4   Octactis speculum           Other</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Match only with scientific name</span></span>
<span><span class="va">plankton_groups_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/assign_plankton_groups.html">assign_plankton_groups</a></span><span class="op">(</span><span class="va">scientific_name</span>,</span>
<span>                                               verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">plankton_groups_name</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       scientific_name  plankton_group</span></span>
<span><span class="co">## 1        Tripos fusus Dinoflagellates</span></span>
<span><span class="co">## 2             Diatoma         Diatoms</span></span>
<span><span class="co">## 3 Nodularia spumigena   Cyanobacteria</span></span>
<span><span class="co">## 4   Octactis speculum           Other</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<pre><code><span><span class="co">## To cite package 'SHARK4R' in publications use:</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   Markus Lindh, Anders Torstensson, SHARK (2024). SHARK4R: Retrieving,</span></span>
<span><span class="co">##   Analyzing, and Validating Marine Data from SHARK and Nordic</span></span>
<span><span class="co">##   Microalgae. R package version 0.1.2.</span></span>
<span><span class="co">##   https://doi.org/10.5281/zenodo.14169399</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   @Manual{,</span></span>
<span><span class="co">##     title = {SHARK4R: Retrieving, Analyzing, and Validating Marine Data from SHARK and Nordic Microalgae},</span></span>
<span><span class="co">##     author = {Markus Lindh and Anders Torstensson and {SHARK}},</span></span>
<span><span class="co">##     year = {2024},</span></span>
<span><span class="co">##     note = {R package version 0.1.2},</span></span>
<span><span class="co">##     url = {https://doi.org/10.5281/zenodo.14169399},</span></span>
<span><span class="co">##   }</span></span></code></pre>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Markus Lindh, Anders Torstensson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
