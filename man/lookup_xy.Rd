% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/xylookup.R
\name{lookup_xy}
\alias{lookup_xy}
\title{Lookup spatial data for a set of points}
\usage{
lookup_xy(
  data,
  shoredistance = TRUE,
  grids = TRUE,
  areas = FALSE,
  as_data_frame = TRUE
)
}
\arguments{
\item{data}{A data frame containing geographic coordinates. The required columns are
\code{sample_longitude_dd} and \code{sample_latitude_dd}. These must be numeric and
within valid ranges (-180 to 180 for longitude, -90 to 90 for latitude).}

\item{shoredistance}{Logical; if \code{TRUE} (default), the distance to the nearest shore is returned.}

\item{grids}{Logical; if \code{TRUE} (default), environmental grid values (e.g., temperature, bathymetry)
are returned.}

\item{areas}{Logical or numeric; if \code{TRUE}, area values are returned for points at a 0 m radius.
If a positive integer is provided, all areas within that radius (in meters) are returned. Default is \code{FALSE}.}

\item{as_data_frame}{Logical; if \code{TRUE} (default), results are returned as a data frame with one row per input coordinate.
If \code{FALSE}, results are returned as a list.}
}
\value{
Either a data frame or a list with the requested spatial data:
\itemize{
\item For data frame output, each row corresponds to the input coordinates. Columns include \code{shoredistance},
environmental grids, and \code{areas} (if requested). Invalid coordinates are filled with \code{NA}.
\item For list output, each element corresponds to one input coordinate. Invalid coordinates are \code{NULL}.
}
}
\description{
Retrieves spatial information (e.g., distance to shore, environmental grids, and area data)
for a set of geographic coordinates. The function handles invalid or duplicate coordinates
automatically and supports returning results as either a data frame or a list.
}
\details{
\itemize{
\item The function first cleans the coordinates, removing invalid or missing values
and identifying unique points to avoid redundant lookups.
\item Coordinates are queried in chunks of 25,000 to avoid overloading the OBIS web service.
\item When \code{areas} is a positive integer, all area values within that radius are returned. A value of \code{TRUE}
is equivalent to 0 m, while \code{FALSE} disables area retrieval.
\item Results are mapped back to the original input order, and duplicates in the input are correctly handled.
\item The function has been modified from the \code{obistools} package (Provoost and Bosch, 2024).
}
}
\examples{
\donttest{
# Example data frame
data <- data.frame(sample_longitude_dd = c(10.983229, 18.265451),
                   sample_latitude_dd = c(58.121034, 58.331616))

# Retrieve shore distances and environmental grids for a dataset
xy_data <- lookup_xy(data, shoredistance = TRUE, grids = TRUE, areas = FALSE)

# Retrieve area data within a 500-meter radius
xy_areas <- lookup_xy(data, shoredistance = FALSE, grids = FALSE, areas = 500)

# Get results as a list instead of a data frame
xy_list <- lookup_xy(data, shoredistance = TRUE, grids = TRUE, areas = FALSE, as_data_frame = FALSE)
}


}
\references{
Provoost P, Bosch S (2024). “obistools: Tools for data enhancement and quality control” Ocean Biodiversity Information System. Intergovernmental Oceanographic Commission of UNESCO. R package version 0.1.0, \url{https://iobis.github.io/obistools/}.
}
\seealso{
\code{\link{check_onland}}, \code{\link{check_depth}}, \url{https://iobis.github.io/xylookup/} – OBIS xylookup web service
}
