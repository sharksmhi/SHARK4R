% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_outliers.R
\name{check_outliers}
\alias{check_outliers}
\title{General outlier check function for SHARK data}
\usage{
check_outliers(
  data,
  parameter,
  datatype,
  threshold_col = "extreme_upper",
  thresholds = .threshold_values
)
}
\arguments{
\item{data}{A tibble containing data in SHARK format. Must include columns:
\code{parameter}, \code{value}, \code{delivery_datatype}, \code{station_name}, \code{sample_date},
\code{sample_id}, \code{shark_sample_id_md5}, \code{sample_min_depth_m}, \code{sample_max_depth_m}.}

\item{parameter}{Character. Name of the parameter to check. Must exist in both
\code{data$parameter} and \code{thresholds$parameter}.}

\item{datatype}{Character. Data type to match against \code{delivery_datatype} in \code{data}
and \code{datatype} in \code{thresholds}.}

\item{threshold_col}{Character. Name of the threshold column in \code{thresholds}
to use for comparison. Default is \code{"extreme_upper"}, with the default option \code{"mild_upper"}.}

\item{thresholds}{A tibble/data frame of thresholds. Must include columns \code{parameter},
\code{datatype}, and at least one numeric threshold column. Defaults to \code{.threshold_values}.}
}
\value{
If outliers are found, returns a \code{DT::datatable} containing:
\code{delivery_datatype}, \code{station_name}, \code{sample_date}, \code{sample_id},
\code{shark_sample_id_md5}, \code{sample_min_depth_m}, \code{sample_max_depth_m},
\code{parameter}, \code{value}, and \code{threshold}. Otherwise, prints a message indicating
that values are within the threshold range.
}
\description{
This function checks whether values for a specified parameter exceed a predefined
threshold. Thresholds are provided in a dataframe (default \code{.threshold_values}),
which should contain columns for \code{parameter}, \code{datatype}, and at least one threshold
column (e.g., \code{extreme_upper}). Only rows in \code{data} matching both the \code{parameter}
and \code{delivery_datatype} (\code{datatype}) are considered.
}
\details{
\itemize{
\item Only rows in \code{data} matching both \code{parameter} and \code{delivery_datatype} are checked.
\item If \code{threshold_col} does not exist in \code{thresholds}, the function stops with an error.
\item If no threshold is found for the specified \code{parameter} and \code{datatype}, the function
stops with an error.
\item Values exceeding the threshold are flagged as outliers and displayed in an interactive table.
}
}
\examples{
# Create a minimal example dataset
example_data <- dplyr::tibble(
  station_name = c("S1", "S2"),
  sample_date = as.Date(c("2025-01-01", "2025-01-02")),
  sample_id = 1:2,
  shark_sample_id_md5 = letters[1:2],
  sample_min_depth_m = c(0, 5),
  sample_max_depth_m = c(1, 6),
  parameter = c("Param1", "Param1"),
  value = c(5, 12),
  delivery_datatype = c("TypeA", "TypeA")
)

example_thresholds <- dplyr::tibble(
  parameter = "Param1",
  datatype = "TypeA",
  extreme_upper = 10
)

check_outliers(
  data = example_data,
  parameter = "Param1",
  datatype = "TypeA",
  threshold_col = "extreme_upper",
  thresholds = example_thresholds
)

}
\seealso{
\code{\link[=get_shark_statistics]{get_shark_statistics()}} for preparing an updated threshold data frame.
}
