% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_fields.R
\name{check_fields}
\alias{check_fields}
\title{Validate SHARK data fields for a given datatype}
\usage{
check_fields(
  data,
  datatype,
  level = "error",
  stars = 1,
  bacterioplankton_subtype = "abundance",
  field_definitions = .field_definitions
)
}
\arguments{
\item{data}{A data frame containing SHARK data to be validated.}

\item{datatype}{A string giving the SHARK datatype to validate against.
Must exist as a name in the provided \code{field_definitions}.}

\item{level}{Character string, either \code{"error"} or \code{"warning"}.
If \code{"error"}, only required fields are validated. If \code{"warning"},
recommended fields are also checked and reported as warnings.}

\item{stars}{Integer. Maximum number of "\emph{" levels to include.
Default = 1 (only single "}").
For example, \code{stars = 2} includes "\emph{" and "**",
\code{stars = 3} includes "}", "\strong{", and "}*".}

\item{bacterioplankton_subtype}{Character. For "Bacterioplankton" only: either
"abundance" (default) or "production". Ignored for other datatypes.}

\item{field_definitions}{A named list of field definitions. Each element
should contain two character vectors: \code{required} and \code{recommended}.
Defaults to the package's built-in \code{SHARK4R:::.field_definitions}.}
}
\value{
A tibble with the following columns:
\describe{
\item{level}{Either \code{"error"} or \code{"warning"}.}
\item{field}{The name of the field that triggered the check.}
\item{row}{Row number(s) in \code{data} where the issue occurred, or \code{NA}
if the whole field is missing.}
\item{message}{A descriptive message explaining the problem.}
}
The tibble will be empty if no problems are found.
}
\description{
This function checks a SHARK data frame against the required and recommended
fields defined for a specific datatype. It verifies that all required fields
are present and contain non-empty values. If \code{level = "warning"}, it
also checks for recommended fields and empty values within them.
}
\details{
Note: A single "*" marks required fields in the standard SHARK template.
A double "**" is often used to specify columns required for \strong{national monitoring only}.
For more information, see:
https://www.smhi.se/data/hav-och-havsmiljo/datavardskap-oceanografi-och-marinbiologi/leverera-data
}
\examples{
# Example 1: Using built-in field definitions for "Phytoplankton"
df_phyto <- data.frame(
  visit_date = "2023-06-01",
  sample_id = "S1",
  scientific_name = "Skeletonema marinoi",
  value = 123
)

check_fields(df_phyto, "Phytoplankton", level = "warning")

# Example 2: Define a custom datatype with required + recommended fields
defs <- list(
  ExampleType = list(
    required = c("id", "value"),
    recommended = "comment"
  )
)

# All fields present and filled
df_ok <- data.frame(id = 1, value = "x", comment = "ok")
check_fields(df_ok, "ExampleType", level = "warning", field_definitions = defs)

# Missing required field
df_missing <- data.frame(id = 1)
check_fields(df_missing, "ExampleType", field_definitions = defs)

# Empty values in required field
df_empty <- data.frame(id = 1, value = c("", NA))
check_fields(df_empty, "ExampleType", field_definitions = defs)

}
